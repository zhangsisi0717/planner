webpackJsonp([1],{"2+Al":function(t,e){},"3Jym":function(t,e){},"3Qd6":function(t,e){},Ej7a:function(t,e){},GiCk:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),a=i("yGkR"),n={name:"NaviBar",data:function(){return{user:null}},methods:{logout:function(){var t=this;a.a.auth().signOut().then(function(){t.$router.push({name:"LoginPage"})})}},created:function(){var t=this;a.a.auth().onAuthStateChanged(function(e){t.user=e||null})}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("div",{staticClass:"ui secondary menu",attrs:{id:"menu"}},[i("i",{staticClass:"home icon"}),t._v(" "),i("a",{staticClass:"ui item"},[i("router-link",{attrs:{to:{name:"Main"}}},[t._v(" Home")])],1),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.user,expression:"user"}],staticClass:"heart icon"}),t._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:t.user,expression:"user"}],staticClass:"ui item",attrs:{id:"history"}},[i("router-link",{attrs:{to:{name:"HistoryPage"}}},[t._v("Saved")])],1),t._v(" "),i("div",{staticClass:"right menu"},[i("i",{staticClass:"user plus icon",attrs:{id:"user-plus"}}),t._v(" "),i("a",{staticClass:"ui item"},[i("router-link",{attrs:{to:{name:"SignupPage"}}},[t._v("Signup")])],1),t._v(" "),i("a",{staticClass:"ui item"},[t.user?t._e():i("router-link",{attrs:{to:{name:"LoginPage"}}},[t._v("Login")])],1),t._v(" "),t.user?i("i",{staticClass:"user circle icon",attrs:{id:"user-circle-icon"}}):t._e(),t._v(" "),t.user?i("a",{staticClass:"ui item",on:{click:t.logout}},[t._v("Logout")]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{attrs:{id:"header"}},[e("h1",{attrs:{id:"title"}},[this._v("Itinerary Planner")])])}]};var o=i("VU/8")(n,r,!1,function(t){i("Ej7a")},"data-v-411cb2c8",null).exports,l={name:"App",components:{NaviBar:o}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},c=i("VU/8")(l,u,!1,null,null,null).exports,d=i("/ocq"),g=new s.a,p={name:"Mapview",components:{NaviBar:o},data:function(){return{map:null,lat:39.8283,lng:-98.5795,travelMode:null}},methods:{resetMap:function(){this.map=new google.maps.Map(this.$refs.map,{zoom:5,center:new google.maps.LatLng(this.lat,this.lng),mapTypeId:google.maps.MapTypeId.ROADMAP})}},mounted:function(){var t=this;this.resetMap(),g.$on("destination-array",function(e){if(e){t.resetMap(),console.log("data received");for(var i=0;i<e.length;i++){console.log("place.lat,lng = "+e[i].address+", "+e[i].lat+","+e[i].lng),new google.maps.Marker({position:new google.maps.LatLng(e[i].lat,e[i].lng),draggable:!0,map:t.map}),new google.maps.InfoWindow({content:'<div style="padding:5px;"><i class="flag icon"></i> '+e[i].address+"</div>",position:new google.maps.LatLng(e[i].lat,e[i].lng)}).open(t.map,null)}}}),g.$on("route-data",function(e){if(e){t.travelMode=e[0];var i=new google.maps.DirectionsService;t.resetMap(),e[1].forEach(function(e){i.route({origin:new google.maps.LatLng(e.origin.lat,e.origin.lng),destination:new google.maps.LatLng(e.destination.lat,e.destination.lng),travelMode:t.travelMode},function(i,s){if("OK"===s){var a=new google.maps.DirectionsRenderer({suppressMarker:!0});new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+e.origin.address,position:new google.maps.LatLng(e.origin.lat,e.origin.lng)}).open(t.map,null),new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+e.destination.address,position:new google.maps.LatLng(e.destination.lat,e.destination.lng)}).open(t.map,null),a.setDirections(i),a.setMap(t.map)}else console.log(s)})})}}),g.$on("route-data-to-mapview",function(e){t.travelMode=e.travelMode;var i=new google.maps.DirectionsService;t.resetMap(),e.routes.forEach(function(e){i.route({origin:new google.maps.LatLng(e.origin.lat,e.origin.lng),destination:new google.maps.LatLng(e.destination.lat,e.destination.lng),travelMode:t.travelMode},function(i,s){if("OK"===s){var a=new google.maps.DirectionsRenderer({suppressMarker:!0});new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+e.origin.address,position:new google.maps.LatLng(e.origin.lat,e.origin.lng)}).open(t.map,null),new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+e.destination.address,position:new google.maps.LatLng(e.destination.lat,e.destination.lng)}).open(t.map,null),a.setDirections(i),a.setMap(t.map)}else console.log(s)})})}),g.$on("route-data-from-routeList",function(e){t.travelMode=e.travelMode;var i=new google.maps.DirectionsService;t.resetMap(),e.routes.forEach(function(e){i.route({origin:new google.maps.LatLng(e.origin.lat,e.origin.lng),destination:new google.maps.LatLng(e.destination.lat,e.destination.lng),travelMode:t.travelMode},function(i,s){if("OK"===s){var a=new google.maps.DirectionsRenderer({suppressMarker:!0});new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+e.origin.address,position:new google.maps.LatLng(e.origin.lat,e.origin.lng)}).open(t.map,null),new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+e.destination.address,position:new google.maps.LatLng(e.destination.lat,e.destination.lng)}).open(t.map,null),a.setDirections(i),a.setMap(t.map)}})})})}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("section",{ref:"map",attrs:{id:"map"}})])},staticRenderFns:[]};var h=i("VU/8")(p,v,!1,function(t){i("PycO")},"data-v-03ec0bd4",null).exports,m=i("lHA8"),f=i.n(m),_=i("mtWM"),w=i.n(_),y={name:"PlacesInputPanel",data:function(){return{address:"",lat:"",lng:"",origin:[],origin_idx:null,destination:[],destination_idx:null,stopsArray:[],stopsArrayDetail:[],allRoutes:[],distanceMatrix:null,errorMessage:"",spinner:!1,apiKey:"AIzaSyAdxXoKAF0KG0yAWKXRiKyOby9YfHUxOug",driving:!0,bicycling:!1,transit:!1,walking:!1,travelMode:"DRIVING"}},methods:{addOrigin:function(){0==this.origin.length?this.addNewStops(!0,!1):this.errorMessage="origin already exists, please remove it first before adding a new one"},addDestination:function(){0==this.destination.length?this.addNewStops(!1,!0):this.errorMessage="destination already exists, please remove it first before adding a new one"},addNewStops:function(t,e){if(this.errorMessage="",this.address)if(this.stopsArray){var i=this.stopsArray.indexOf(this.address);if(i>-1&&this.address!=this.origin[0]&&this.address!=this.destination[0])this.errorMessage="duplicate stops/stops can not be the same with origin/destination";else if(i>-1&&t&&this.address==this.origin[0])this.errorMessage="duplicate origin";else if(i>-1&&e&&this.address==this.destination[0])this.errorMessage="duplicate destination";else if(!(i>-1)||t||e||this.address!=this.origin[0]&&this.address!=this.destination[0]){var s={address:this.address,lat:this.lat,lng:this.lng,isOrigin:t,isDestination:e};this.stopsArray.push(this.address),this.stopsArrayDetail.push(s),t&&(this.origin=[this.address]),e&&(this.destination=[this.address])}else this.errorMessage="stops can not be the same with origin/destination"}else{var a={address:this.address,lat:this.lat,lng:this.lng,isOrigin:t,isDestination:e};this.stopsArray.push(this.address),this.stopsArrayDetail.push(a),t&&(this.origin=[this.address]),e&&(this.destination=[this.address])}else this.errorMessage="Please input valid address";this.renderAllStopsMarkers()},renderAllStopsMarkers:function(){g.$emit("destination-array",this.stopsArrayDetail)},removeThisLocation:function(t){this.errorMessage="",t>-1&&(this.stopsArrayDetail[t].isOrigin&&(this.origin=[]),this.stopsArrayDetail[t].isDestination&&(this.destination=[]),this.stopsArray.splice(t,1),this.stopsArrayDetail.splice(t,1)),this.renderAllStopsMarkers()},findCurrentLocation:function(){var t=this;this.spinner=!0,this.errorMessage="",navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.coordinateToAddress(e.coords.latitude,e.coords.longitude)},function(e){t.errorMessage="locator can not find your location, please input manually"}):this.errorMessage="browser does not support geolocation, please input manually"},coordinateToAddress:function(t,e){var i=this;this.spinner=!0,w.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+e+"&key="+this.apiKey).then(function(t){t.data.error_message?(i.errorMessage=t.data.error_message,i.spinner=!1):(i.address=t.data.results[0].formatted_address,i.spinner=!1)}).catch(function(t){i.errorMessage=t.message,i.spinner=!1})},requestSingleRouteInfo:function(t){var e=this;(new google.maps.DirectionsService).route({origin:this.origin[0],destination:this.destination[0],travelMode:this.travelMode},function(i,s){if("OK"==s){var a=i.routes[0].legs[0],n={origin:{address:a.start_address,lat:a.start_location.lat(),lng:a.start_location.lng()},destination:{address:a.end_address,lat:a.end_location.lat(),lng:a.end_location.lng()},distance:a.distance,duration:a.duration};e.allRoutes=[n]}else"NOT_FOUND"==s?his.errorMessage="The origin and/or destination of this pairing could not be geocoded.":"ZERO_RESULTS"==s&&(e.errorMessage="No route could be found between the origin and destination.");t(e.allRoutes)})},requestRoutesInfo:function(t){for(var e=this,i=[],s=[],a=0;a<this.stopsArrayDetail.length;a++){var n=new google.maps.LatLng(this.stopsArrayDetail[a].lat,this.stopsArrayDetail[a].lng);i.push(n),s.push(n)}(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:i,destinations:s,travelMode:this.travelMode,transitOptions:null,drivingOptions:null,unitSystem:null,avoidHighways:null,avoidTolls:null},function(i,s){if("OK"==s){for(var a=new Array(e.stopsArrayDetail.length),n=0;n<a.length;n++)a[n]=new Array(a.length);for(var r=i.originAddresses,o=i.destinationAddresses,l=0;l<r.length;l++)for(var u=i.rows[l].elements,c=0;c<u.length;c++){var d=u[c],g=d.distance,p=d.duration,v=r[l],h=o[c],m={origin:{address:v,lat:e.stopsArrayDetail[l].lat,lng:e.stopsArrayDetail[l].lng},destination:{address:h,lat:e.stopsArrayDetail[c].lat,lng:e.stopsArrayDetail[c].lng},distance:g,duration:p};a[l][c]=m}e.allRoutes=a,t(e.allRoutes)}else"NOT_FOUND"==s?e.errorMessage="The origin and/or destination of this pairing could not be geocoded.":"ZERO_RESULTS"==s&&(e.errorMessage="No route could be found between the origin and destination.")})},generateDistanceMatrix:function(t){for(var e=[],i=[],s=0;s<this.stopsArrayDetail.length;s++)this.stopsArrayDetail[s].isOrigin?this.origin_idx=s:this.stopsArrayDetail[s].isDestination?this.destination_idx=s:e.push(s);for(var a=0;a<this.stopsArrayDetail.length-1;a++){var n=[];if(0===a){n.push(t[this.origin_idx][this.origin_idx]);for(var r=0;r<e.length;r++)n.push(t[this.origin_idx][e[r]])}else{n.push(t[e[a-1]][this.destination_idx]);for(r=0;r<e.length;r++)n.push(t[e[a-1]][e[r]])}i.push(n)}return i},greedyMethod:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.length,s=new f.a,a=0;a<i;a++)s.add(a);for(var n=0,r=[e],o=e,l=function(){s.delete(o);var e=null,i=1/0;s.forEach(function(s){t[o][s].duration.value<i&&(e=s,i=t[o][s].duration.value)}),n+=i,o=e,r.push(o)};s.size>1;)l();return n+=t[o][e].duration.value,[r,n]},greedyEnumerateOriginsMethod:function(t){for(var e=t.length,i=[],s=1/0,a=0;a<e;a++){var n=this.greedyMethod(t,a),r=n[0],o=n[1];o<s&&(s=o,i=r)}for(var l=null,u=0;u<i.length;++u)if(0===i[u]){l=u;break}var c=i.slice(l),d=i.slice(0,l),g=c.concat(d);g.push(0);for(var p=[],v=0;v<g.length-1;++v){p.push(this.distanceMatrix[g[v]][g[v+1]]);this.distanceMatrix[g[v]][g[v+1]]}return p},calculateOptimalItinerary:function(){var t=this;2==this.stopsArrayDetail.length?this.requestSingleRouteInfo(function(e){if(e){var i=[t.travelMode,e];g.$emit("route-data",i)}}):this.requestRoutesInfo(function(e){if(e){t.distanceMatrix=t.generateDistanceMatrix(e);var i=t.greedyEnumerateOriginsMethod(t.distanceMatrix),s=[t.travelMode,i];g.$emit("route-data",s)}})},bicycleIconClicked:function(){this.driving=!1,this.bicycling=!0,this.transit=!1,this.walking=!1,this.travelMode="BICYCLING"},carIconClicked:function(){this.driving=!0,this.bicycling=!1,this.transit=!1,this.walking=!1},subwayIconClicked:function(){this.driving=!1,this.bicycling=!1,this.transit=!0,this.walking=!1,this.travelMode="TRANSIT"},walkingIconClicked:function(){this.driving=!1,this.bicycling=!1,this.transit=!1,this.walking=!0,this.travelMode="WALKING"}},mounted:function(){var t=this,e=new google.maps.places.Autocomplete(this.$refs.autocomplete,{bounds:new google.maps.LatLngBounds(new google.maps.LatLng(45.4215296,-75.6971931))});e.addListener("place_changed",function(){var i=e.getPlace();t.lat=i.geometry.location.lat(),t.lng=i.geometry.location.lng(),t.address=i.name+", "+i.vicinity})}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"ui three column grid",attrs:{id:"input-panel"}},[i("div",{staticClass:"column"},[i("form",{staticClass:"ui segment large form"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"ui message red"},[t._v(t._s(t.errorMessage))]),t._v(" "),i("div",{staticClass:"ui segment"},[i("div",{staticClass:"field"},[i("div",{staticClass:"ui right icon input large",class:{loading:t.spinner}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],ref:"autocomplete",attrs:{type:"text",placeholder:"Enter address here"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),t._v(" "),i("i",{staticClass:"dot circle link icon",attrs:{id:"dot-icon"},on:{click:function(e){return e.preventDefault(),t.findCurrentLocation.apply(null,arguments)}}})]),t._v(" "),i("button",{staticClass:"tiny ui button",attrs:{id:"add-origin"},on:{click:function(e){return e.preventDefault(),t.addOrigin.apply(null,arguments)}}},[t._v("add origin")]),t._v(" "),i("button",{staticClass:"tiny ui button",attrs:{id:"add-destination"},on:{click:function(e){return e.preventDefault(),t.addDestination.apply(null,arguments)}}},[t._v("add destination")]),t._v(" "),i("button",{staticClass:"tiny ui button",attrs:{id:"add-stop"},on:{click:function(e){return e.preventDefault(),t.addNewStops(!1,!1)}}},[t._v("add stops")])])]),t._v(" "),t._l(t.stopsArray,function(e,s){return i("h3",{directives:[{name:"show",rawName:"v-show",value:t.stopsArrayDetail[s].isOrigin,expression:"stopsArrayDetail[index].isOrigin"}]},[t._v("Origin:")])}),t._v(" "),i("div",{staticClass:"ui list"},t._l(t.stopsArray,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.stopsArrayDetail[s].isOrigin,expression:"stopsArrayDetail[index].isOrigin"}],staticClass:"item"},[i("i",{staticClass:"map marker icon"}),t._v(" "),i("div",{staticClass:"content"},[i("h4",{staticClass:"header"},[t._v(t._s(e)+" "),i("span",[i("i",{staticClass:"window close outline icon",on:{click:function(e){return t.removeThisLocation(s)}}})])])])])}),0),t._v(" "),t._l(t.stopsArray,function(e,s){return i("h3",{directives:[{name:"show",rawName:"v-show",value:t.stopsArrayDetail[s].isDestination,expression:"stopsArrayDetail[index].isDestination"}]},[t._v("Destination:")])}),t._v(" "),i("div",{staticClass:"ui list"},t._l(t.stopsArray,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.stopsArrayDetail[s].isDestination,expression:"stopsArrayDetail[index].isDestination"}],staticClass:"item"},[i("i",{staticClass:"map marker icon"}),t._v(" "),i("div",{staticClass:"content"},[i("h4",{staticClass:"header"},[t._v(t._s(e)+" "),i("span",[i("i",{staticClass:"window close outline icon",on:{click:function(e){return t.removeThisLocation(s)}}})])])])])}),0),t._v(" "),i("h3",{directives:[{name:"show",rawName:"v-show",value:t.stopsArray.length-t.origin.length-t.destination.length>0,expression:"stopsArray.length - origin.length - destination.length>0"}]},[t._v("Lists of stops:")]),t._v(" "),i("div",{staticClass:"ui list"},[t._l(t.stopsArray,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.stopsArrayDetail[s].isOrigin&&!t.stopsArrayDetail[s].isDestination,expression:"!stopsArrayDetail[index].isOrigin && !stopsArrayDetail[index].isDestination"}],staticClass:"item"},[i("i",{staticClass:"map marker icon"}),t._v(" "),i("div",{staticClass:"content"},[i("h4",{staticClass:"header"},[t._v(t._s(e)+" "),i("span",[i("i",{staticClass:"window close outline icon",on:{click:function(e){return t.removeThisLocation(s)}}})])])])])}),t._v(" "),i("form",{directives:[{name:"show",rawName:"v-show",value:t.origin.length>0&&t.destination.length>0&&t.stopsArray.length>=2,expression:"origin.length>0&&destination.length>0&&stopsArray.length>=2"}],staticClass:"ui segment",attrs:{id:"tranportation"}},[i("div",{attrs:{id:"trasnInside"}},[i("button",{class:t.driving?"green":"white",attrs:{id:"car-button"}}),t._v(" "),i("i",{staticClass:"car icon",on:{click:function(e){return e.preventDefault(),t.carIconClicked.apply(null,arguments)}}}),t._v(" "),i("button",{class:t.bicycling?"green":"white",attrs:{id:"bicycle-button"}}),t._v(" "),i("i",{staticClass:"bicycle icon",on:{click:function(e){return e.preventDefault(),t.bicycleIconClicked.apply(null,arguments)}}}),t._v(" "),i("button",{class:t.transit?"green":"white",attrs:{id:"subway-button"}}),t._v(" "),i("i",{staticClass:"subway icon",on:{click:function(e){return e.preventDefault(),t.subwayIconClicked.apply(null,arguments)}}}),t._v(" "),i("button",{class:t.walking?"green":"white",attrs:{id:"male-button"}}),t._v(" "),i("i",{staticClass:"male icon",on:{click:function(e){return e.preventDefault(),t.walkingIconClicked.apply(null,arguments)}}}),t._v(" "),i("button",{staticClass:"small ui button",attrs:{id:"calculate"},on:{click:t.calculateOptimalItinerary}},[i("router-link",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{to:{name:"ResultMapview"}}},[t._v("calculate")])],1)])])],2)],2)])])},staticRenderFns:[]};var C={name:"Main",components:{NaviBar:o,PlacesInputPanel:i("VU/8")(y,M,!1,function(t){i("GiCk")},"data-v-9317317c",null).exports,Mapview:h}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("NaviBar"),this._v(" "),e("Mapview"),this._v(" "),e("PlacesInputPanel")],1)},staticRenderFns:[]};var b=i("VU/8")(C,A,!1,function(t){i("YoZz")},"data-v-9b4c0bf0",null).exports,D={name:"Login",data:function(){return{email:"",password:"",message:""}},methods:{loginAccount:function(){var t=this;this.email&&this.password?(this.message=null,a.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.$router.push({name:"Main"})}).catch(function(e){t.message=e.message}),this.message=""):this.message="please fill in all fields"}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",[i("h1",{attrs:{id:"login-header"}},[t._v("Login")]),t._v(" "),i("form",{staticClass:"ui segment large form",attrs:{id:"login-form"},on:{submit:function(t){t.preventDefault()}}},[i("div",{staticClass:"field"},[i("label",[t._v("Email")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"julie@gmail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"field"},[i("label",[t._v("Password")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),i("button",{staticClass:"ui button",attrs:{type:"submit"},on:{click:t.loginAccount}},[t._v("Login")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"ui message red"},[t._v(t._s(t.message))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field"},[e("div",{staticClass:"ui checkbox"},[e("input",{staticClass:"hidden",attrs:{type:"checkbox",tabindex:"0"}})])])}]};var x={name:"LoginPage",components:{NaviBar:o,Login:i("VU/8")(D,L,!1,function(t){i("q9gO")},"data-v-2236b9ce",null).exports}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("NaviBar"),this._v(" "),e("Login")],1)},staticRenderFns:[]},R=i("VU/8")(x,k,!1,null,null,null).exports,I=i("wffv"),N=i.n(I),O=(i("881v"),a.a.initializeApp({apiKey:"AIzaSyCoepB_sM1CUXWoc2drJ6kxmg6Bu4Y-iF4",authDomain:"optimal-itinerary-planner-2.firebaseapp.com",projectId:"optimal-itinerary-planner-2",storageBucket:"optimal-itinerary-planner-2.appspot.com",messagingSenderId:"383452786146",appId:"1:383452786146:web:e9d2fb44a651827b999dbb",measurementId:"G-HSSKG1B7KT"}));a.a.analytics();var S=O.firestore(),E={name:"Singup",data:function(){return{username:"",email:"",password:"",message:"",slug:null,islogin:!1}},methods:{signup:function(){var t=this;if(this.username&&this.email&&this.password){this.slug=N()(this.username,{replacement:"-",remove:/[!@#$%^&*:]/g,lower:!0});var e=S.collection("users").doc(this.slug);e.get().then(function(i){i.exists?t.message="username already exists":(a.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(function(i){e.set({username:t.username,calculatedItinerary:[],calculatedItineraryHistory:[],UID:i.user.uid})}).then(function(){t.$router.push({name:"Main"})}).catch(function(e){t.message=e.message}),t.message="success")})}else this.message="please fill out all fields"}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",{attrs:{id:"signup-header"}},[t._v("Signup")]),t._v(" "),i("form",{staticClass:"ui segment large form",attrs:{id:"signup-form"},on:{submit:function(e){return e.preventDefault(),t.signup.apply(null,arguments)}}},[i("div",{staticClass:"field"},[i("label",[t._v("Username")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",name:"username",placeholder:"Julie_Z"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"field"},[i("label",[t._v("Email")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"julie@gmail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"field"},[i("label",[t._v("Passsword")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"ui button",attrs:{type:"submit"}},[t._v("Signup")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"ui message red"},[t._v(t._s(t.message))])])])},staticRenderFns:[]};var $={name:"SignupPage",components:{NaviBar:o,Signup:i("VU/8")(E,P,!1,function(t){i("a8Ey")},"data-v-5cae81a6",null).exports}},U={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("NaviBar"),this._v(" "),e("Signup")],1)},staticRenderFns:[]},T=i("VU/8")($,U,!1,null,null,null).exports,H={name:"RouteList",components:{},data:function(){return{test:null,user:null,calculatedRouteLists:[],curRoutesSaved:!1,travelMode:null}},methods:{showThisRouteOnMap:function(t){var e={travelMode:this.travelMode,routes:[t]};g.$emit("route-data-from-routeList",e)},showAllRoutesOnMap:function(){var t={travelMode:this.travelMode,routes:this.calculatedRouteLists};g.$emit("route-data-from-routeList",t)},saveCurrentRoutes:function(){var t=this;this.curRoutesSaved=!0,S.collection("users").where("UID","==",this.user.uid).get().then(function(e){e.forEach(function(e){var i=null;i=e.data().calculatedItineraryHistory;var s={routes:t.calculatedRouteLists,travelMode:t.travelMode};i.push(s),S.collection("users").doc(e.id).update({calculatedItineraryHistory:i})})})}},created:function(){var t=this;this.user=a.a.auth().currentUser,g.$on("route-data",function(e){t.calculatedRouteLists=[],e&&(t.travelMode=e[0],t.calculatedRouteLists=e[1],t.allCalculatedRouteLists=e[1])}),g.$on("route-data-to-routelist",function(e){t.calculatedRouteLists=[],e&&(t.travelMode=e.travelMode,t.calculatedRouteLists=e.routes,t.allCalculatedRouteLists=e.routes)})}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("Optimal Routes List:")]),t._v(" "),i("section",{staticClass:"ui three column grid",attrs:{id:"input-panel"}},[i("form",{staticClass:"ui segment large form"},[i("h2",[t._v("Results("+t._s(this.travelMode)+"):")]),t._v(" "),i("button",{on:{click:function(e){return e.preventDefault(),t.showAllRoutesOnMap.apply(null,arguments)}}},[t._v("show all routes")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.curRoutesSaved&&t.user,expression:"!curRoutesSaved && user"}],staticClass:"save outline icon",on:{click:t.saveCurrentRoutes}}),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.curRoutesSaved,expression:"curRoutesSaved"}],staticClass:"save icon"}),t._v(" "),t._l(t.calculatedRouteLists,function(e){return i("div",{staticClass:"item",on:{click:function(i){return t.showThisRouteOnMap(e)}}},[i("div",[i("i",{staticClass:"marker alternate icon"}),t._v("\n          "+t._s(e.origin.address)+"\n        ")]),t._v(" "),i("div",[i("i",{staticClass:"flag checkered icon"}),t._v("\n          "+t._s(e.destination.address)+"\n        ")]),t._v(" "),i("div",{staticClass:"ui label small"},[t._v(t._s(e.distance.text))]),t._v(" "),i("div",{staticClass:"ui label small"},[t._v(t._s(e.duration.text))])])})],2)])])},staticRenderFns:[]};var F={name:"ResultMapview",components:{NaviBar:o,RouteList:i("VU/8")(H,B,!1,function(t){i("3Jym")},"data-v-34e1b660",null).exports,Mapview:h},data:function(){return{}},methods:{}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("NaviBar"),this._v(" "),e("Mapview"),this._v(" "),e("RouteList")],1)},staticRenderFns:[]};var V=i("VU/8")(F,K,!1,function(t){i("3Qd6")},"data-v-289e6878",null).exports,W={name:"History",data:function(){return{routesHistory:null,user:null}},created:function(){var t=this;this.user=a.a.auth().currentUser,S.collection("users").where("UID","==",this.user.uid).get().then(function(e){e.forEach(function(e){t.routesHistory=e.data().calculatedItineraryHistory})})},methods:{renderThisItinerary:function(t){g.$emit("route-data-to-routelist",t),g.$emit("route-data-to-mapview",t)}}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("Saved Itinerary")]),t._v(" "),i("form",{staticClass:"ui segment large form"},t._l(t.routesHistory,function(e,s){return i("div",{staticClass:"item",attrs:{id:"saved-routes"},on:{click:function(i){return t.renderThisItinerary(e)}}},[i("div",[i("h3",[t._v("No. "+t._s(s+1)+"\n                    "),i("button",{attrs:{id:"detail"}},[i("router-link",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{to:{name:"ResultMapview"}}},[t._v("view detail")])],1)]),t._v(" "),i("i",{staticClass:"marker alternate icon"}),t._v("\n                    Origin: "+t._s(e.routes[0].origin.address)+"\n                ")]),t._v(" "),i("div",[i("i",{staticClass:"flag checkered icon"}),t._v("\n                    Destination: "+t._s(e.routes[e.routes.length-1].destination.address)+"\n                ")]),t._v(" "),i("div",[i("i",{staticClass:"smile outline icon"}),t._v("\n                    TravelMode: "+t._s(e.travelMode)+"\n                ")])])}),0)])},staticRenderFns:[]};var j={name:"HistoryPage",components:{NaviBar:o,History:i("VU/8")(W,G,!1,function(t){i("2+Al")},"data-v-3da0e846",null).exports}},q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("NaviBar"),this._v(" "),e("History")],1)},staticRenderFns:[]},z=i("VU/8")(j,q,!1,null,null,null).exports;s.a.use(d.a);var J=new d.a({routes:[{path:"/",name:"Main",component:b},{path:"/mapview",name:"Mapview",component:h},{path:"/loginPage",name:"LoginPage",component:R},{path:"/signuppage",name:"SignupPage",component:T},{path:"/resultmapview",name:"ResultMapview",component:V},{path:"/historypage",name:"HistoryPage",component:z}]});s.a.config.productionTip=!1;a.a.auth().onAuthStateChanged(function(){new s.a({el:"#app",router:J,components:{App:c},template:"<App/>"})})},PycO:function(t,e){},YoZz:function(t,e){},a8Ey:function(t,e){},q9gO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.45c9e1ec0eb62dffa99e.js.map