webpackJsonp([1],{"3oUP":function(e,t){},DKt7:function(e,t){},FoLC:function(e,t){},HvaR:function(e,t){},"IWa+":function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a=s("yGkR"),n={name:"NaviBar",data:function(){return{user:null}},methods:{logout:function(){var e=this;a.a.auth().signOut().then(function(){e.$router.push({name:"LoginPage"})})}},created:function(){var e=this;console.log("run created"),a.a.auth().onAuthStateChanged(function(t){t?(console.log(e.user),e.user=t):(console.log("user is null"),e.user=null)})},mounted:function(){console.log("Navibar mounted")}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),s("div",{staticClass:"ui secondary menu",attrs:{id:"menu"}},[s("i",{staticClass:"home icon"}),e._v(" "),s("a",{staticClass:"ui item"},[s("router-link",{attrs:{to:{name:"Main"}}},[e._v(" Home")])],1),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.user,expression:"user"}],staticClass:"heart icon"}),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:e.user,expression:"user"}],staticClass:"ui item",attrs:{id:"history"}},[s("router-link",{attrs:{to:{name:"HistoryPage"}}},[e._v("Saved")])],1),e._v(" "),s("div",{staticClass:"right menu"},[s("i",{staticClass:"user plus icon",attrs:{id:"user-plus"}}),e._v(" "),s("a",{staticClass:"ui item"},[s("router-link",{attrs:{to:{name:"SignupPage"}}},[e._v("Signup")])],1),e._v(" "),s("a",{staticClass:"ui item"},[e.user?e._e():s("router-link",{attrs:{to:{name:"LoginPage"}}},[e._v("Login")])],1),e._v(" "),e.user?s("i",{staticClass:"user circle icon",attrs:{id:"user-circle-icon"}}):e._e(),e._v(" "),e.user?s("a",{staticClass:"ui item",on:{click:e.logout}},[e._v("Logout")]):e._e()])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{attrs:{id:"header"}},[t("h1",{attrs:{id:"title"}},[this._v("Itinerary Planner")])])}]};var r=s("VU/8")(n,o,!1,function(e){s("HvaR")},"data-v-22c9b41e",null).exports,l={name:"App",components:{NaviBar:r}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},u=s("VU/8")(l,c,!1,null,null,null).exports,d=s("/ocq"),g=new i.a,p={name:"Mapview",components:{NaviBar:r},data:function(){return{map:null,lat:39.8283,lng:-98.5795,travelMode:null}},methods:{resetMap:function(){this.map=new google.maps.Map(this.$refs.map,{zoom:5,center:new google.maps.LatLng(this.lat,this.lng),mapTypeId:google.maps.MapTypeId.ROADMAP})}},mounted:function(){var e=this;this.resetMap(),g.$on("destination-array",function(t){if(t){e.resetMap(),console.log("data received");for(var s=0;s<t.length;s++){console.log("place.lat,lng = "+t[s].address+", "+t[s].lat+","+t[s].lng),new google.maps.Marker({position:new google.maps.LatLng(t[s].lat,t[s].lng),draggable:!0,map:e.map}),new google.maps.InfoWindow({content:'<div style="padding:5px;"><i class="flag icon"></i> '+t[s].address+"</div>",position:new google.maps.LatLng(t[s].lat,t[s].lng)}).open(e.map,null)}}}),g.$on("route-data",function(t){if(t){e.travelMode=t[0];var s=new google.maps.DirectionsService;e.resetMap(),t[1].forEach(function(t){s.route({origin:new google.maps.LatLng(t.origin.lat,t.origin.lng),destination:new google.maps.LatLng(t.destination.lat,t.destination.lng),travelMode:e.travelMode},function(s,i){if("OK"===i){var a=new google.maps.DirectionsRenderer({suppressMarker:!0});new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+t.origin.address,position:new google.maps.LatLng(t.origin.lat,t.origin.lng)}).open(e.map,null),new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+t.destination.address,position:new google.maps.LatLng(t.destination.lat,t.destination.lng)}).open(e.map,null),a.setDirections(s),a.setMap(e.map)}else console.log(i)})})}}),g.$on("route-data-to-mapview",function(t){e.travelMode=t.travelMode;var s=new google.maps.DirectionsService;e.resetMap(),t.routes.forEach(function(t){s.route({origin:new google.maps.LatLng(t.origin.lat,t.origin.lng),destination:new google.maps.LatLng(t.destination.lat,t.destination.lng),travelMode:e.travelMode},function(s,i){if("OK"===i){var a=new google.maps.DirectionsRenderer({suppressMarker:!0});new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+t.origin.address,position:new google.maps.LatLng(t.origin.lat,t.origin.lng)}).open(e.map,null),new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+t.destination.address,position:new google.maps.LatLng(t.destination.lat,t.destination.lng)}).open(e.map,null),a.setDirections(s),a.setMap(e.map)}else console.log(i)})})}),g.$on("route-data-from-routeList",function(t){e.travelMode=t.travelMode;var s=new google.maps.DirectionsService;e.resetMap(),t.routes.forEach(function(t){console.log("routes.for each data:"),console.log(t),s.route({origin:new google.maps.LatLng(t.origin.lat,t.origin.lng),destination:new google.maps.LatLng(t.destination.lat,t.destination.lng),travelMode:e.travelMode},function(s,i){if("OK"===i){var a=new google.maps.DirectionsRenderer({suppressMarker:!0});new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+t.origin.address,position:new google.maps.LatLng(t.origin.lat,t.origin.lng)}).open(e.map,null),new google.maps.InfoWindow({content:'<i class="marker alternate icon"></i> '+t.destination.address,position:new google.maps.LatLng(t.destination.lat,t.destination.lng)}).open(e.map,null),a.setDirections(s),a.setMap(e.map)}else console.log(i)})})})}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("section",{ref:"map",attrs:{id:"map"}})])},staticRenderFns:[]};var m=s("VU/8")(p,v,!1,function(e){s("FoLC")},"data-v-5aceab2c",null).exports,h=s("lHA8"),f=s.n(h),_=s("mtWM"),w=s.n(_),y={name:"PlacesInputPanel",data:function(){return{address:"",lat:"",lng:"",origin:[],origin_idx:null,destination:[],destination_idx:null,stopsArray:[],stopsArrayDetail:[],allRoutes:[],distanceMatrix:null,errorMessage:"",spinner:!1,apiKey:"AIzaSyAdxXoKAF0KG0yAWKXRiKyOby9YfHUxOug",driving:!0,bicycling:!1,transit:!1,walking:!1,travelMode:"DRIVING"}},methods:{addOrigin:function(){0==this.origin.length?this.addNewStops(!0,!1):this.errorMessage="origin already exists, please remove it first before adding a new one",console.log(this.stopsArrayDetail)},addDestination:function(){0==this.destination.length?this.addNewStops(!1,!0):this.errorMessage="destination already exists, please remove it first before adding a new one",console.log(this.stopsArrayDetail)},addNewStops:function(e,t){if(this.errorMessage="",this.address)if(this.stopsArray){var s=this.stopsArray.indexOf(this.address);if(s>-1&&this.address!=this.origin[0]&&this.address!=this.destination[0])this.errorMessage="duplicate stops/stops can not be the same with origin/destination";else if(s>-1&&e&&this.address==this.origin[0])this.errorMessage="duplicate origin";else if(s>-1&&t&&this.address==this.destination[0])this.errorMessage="duplicate destination";else if(!(s>-1)||e||t||this.address!=this.origin[0]&&this.address!=this.destination[0]){var i={address:this.address,lat:this.lat,lng:this.lng,isOrigin:e,isDestination:t};this.stopsArray.push(this.address),this.stopsArrayDetail.push(i),e&&(this.origin=[this.address]),t&&(this.destination=[this.address])}else this.errorMessage="stops can not be the same with origin/destination"}else{var a={address:this.address,lat:this.lat,lng:this.lng,isOrigin:e,isDestination:t};this.stopsArray.push(this.address),this.stopsArrayDetail.push(a),e&&(this.origin=[this.address]),t&&(this.destination=[this.address])}else this.errorMessage="Please input valid address";this.renderAllStopsMarkers(),console.log(this.stopsArrayDetail)},renderAllStopsMarkers:function(){console.log("render all stops markder called"),console.log("emit destination-array"),g.$emit("destination-array",this.stopsArrayDetail)},removeThisLocation:function(e){this.errorMessage="",e>-1&&(this.stopsArrayDetail[e].isOrigin&&(this.origin=[]),this.stopsArrayDetail[e].isDestination&&(this.destination=[]),this.stopsArray.splice(e,1),this.stopsArrayDetail.splice(e,1),console.log("after delete, current locations = "+this.stopsArrayDetail),console.log(this.stopsArrayDetail)),this.renderAllStopsMarkers()},findCurrentLocation:function(){var e=this;this.spinner=!0,this.errorMessage="",navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.lat=t.coords.latitude,e.lng=t.coords.longitude,e.coordinateToAddress(t.coords.latitude,t.coords.longitude),console.log(t.coords.latitude,t.coords.longitude)},function(t){e.errorMessage="locator can not find your location, please input manually",console.log(t.message)}):this.errorMessage="browser does not support geolocation, please input manually"},coordinateToAddress:function(e,t){var s=this;this.spinner=!0,w.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key="+this.apiKey).then(function(e){e.data.error_message?(s.errorMessage=e.data.error_message,console.log(e.data.error_message),s.spinner=!1):(s.address=e.data.results[0].formatted_address,s.spinner=!1,console.log(e.data.results[0].formatted_address))}).catch(function(e){s.errorMessage=e.message,s.spinner=!1,console.log(e.message)})},requestRoutesInfo:function(e){for(var t=this,s=[],i=[],a=0;a<this.stopsArrayDetail.length;a++){var n=new google.maps.LatLng(this.stopsArrayDetail[a].lat,this.stopsArrayDetail[a].lng);s.push(n),i.push(n)}(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:s,destinations:i,travelMode:this.travelMode,transitOptions:null,drivingOptions:null,unitSystem:null,avoidHighways:null,avoidTolls:null},function(s,i){if("OK"==i){for(var a=new Array(t.stopsArrayDetail.length),n=0;n<a.length;n++)a[n]=new Array(a.length);for(var o=s.originAddresses,r=s.destinationAddresses,l=0;l<o.length;l++)for(var c=s.rows[l].elements,u=0;u<c.length;u++){var d=c[u],g=d.distance,p=d.duration,v=o[l],m=r[u];console.log(l,u),console.log("from,origins[i]="+o[l]+",to,destinations[j]="+r[u]);var h={origin:{address:v,lat:t.stopsArrayDetail[l].lat,lng:t.stopsArrayDetail[l].lng},destination:{address:m,lat:t.stopsArrayDetail[u].lat,lng:t.stopsArrayDetail[u].lng},distance:g,duration:p};console.log(h),a[l][u]=h}t.allRoutes=a,console.log(t.allRoutes),e(t.allRoutes)}else"NOT_FOUND"==i?t.errorMessage="The origin and/or destination of this pairing could not be geocoded.":"ZERO_RESULTS"==i&&(t.errorMessage="No route could be found between the origin and destination.")})},generateDistanceMatrix:function(e){console.log("start generate distance matrix");for(var t=[],s=[],i=0;i<this.stopsArrayDetail.length;i++)this.stopsArrayDetail[i].isOrigin?this.origin_idx=i:this.stopsArrayDetail[i].isDestination?this.destination_idx=i:t.push(i);for(var a=0;a<this.stopsArrayDetail.length-1;a++){var n=[];if(0===a){n.push(e[this.origin_idx][this.origin_idx]);for(var o=0;o<t.length;o++)n.push(e[this.origin_idx][t[o]])}else{n.push(e[t[a-1]][this.destination_idx]);for(o=0;o<t.length;o++)n.push(e[t[a-1]][t[o]])}s.push(n)}return s},greedyMethod:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.length,i=new f.a,a=0;a<s;a++)i.add(a);for(var n=0,o=[t],r=t,l=function(){i.delete(r);var t=null,s=1/0;i.forEach(function(i){e[r][i].duration.value<s&&(t=i,s=e[r][i].duration.value)}),n+=s,r=t,o.push(r)};i.size>1;)l();return n+=e[r][t].duration.value,[o,n]},greedyEnumerateOriginsMethod:function(e){for(var t=e.length,s=[],i=1/0,a=0;a<t;a++){var n=this.greedyMethod(e,a),o=n[0],r=n[1];r<i&&(i=r,s=o)}for(var l=null,c=0;c<s.length;++c)if(0===s[c]){l=c;break}var u=s.slice(l),d=s.slice(0,l),g=u.concat(d);g.push(0),console.log("final result index ========"),console.log(g),console.log("final routes are:===========");for(var p=[],v=0;v<g.length-1;++v){p.push(this.distanceMatrix[g[v]][g[v+1]]);var m=this.distanceMatrix[g[v]][g[v+1]];console.log("from "+m.origin.address+" to "+m.destination.address)}return p},calculateOptimalItinerary:function(){var e=this;this.requestRoutesInfo(function(t){if(t){console.log("run here all routes,allRoutesData="),console.log(t),console.log("all stops detail:"),console.log(e.stopsArrayDetail),e.distanceMatrix=e.generateDistanceMatrix(t);var s=e.greedyEnumerateOriginsMethod(e.distanceMatrix),i=[e.travelMode,s];g.$emit("route-data",i)}})},bicycleIconClicked:function(){this.driving=!1,this.bicycling=!0,this.transit=!1,this.walking=!1,this.travelMode="BICYCLING"},carIconClicked:function(){this.driving=!0,this.bicycling=!1,this.transit=!1,this.walking=!1},subwayIconClicked:function(){this.driving=!1,this.bicycling=!1,this.transit=!0,this.walking=!1,this.travelMode="TRANSIT"},walkingIconClicked:function(){this.driving=!1,this.bicycling=!1,this.transit=!1,this.walking=!0,this.travelMode="WALKING"}},mounted:function(){var e=this,t=new google.maps.places.Autocomplete(this.$refs.autocomplete,{bounds:new google.maps.LatLngBounds(new google.maps.LatLng(45.4215296,-75.6971931))});t.addListener("place_changed",function(){var s=t.getPlace();e.lat=s.geometry.location.lat(),e.lng=s.geometry.location.lng(),e.address=s.name+", "+s.vicinity,console.log(e.address),console.log("lat="+e.lat+", lng="+e.lng)})}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"ui three column grid",attrs:{id:"input-panel"}},[s("div",{staticClass:"column"},[s("form",{staticClass:"ui segment large form"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage,expression:"errorMessage"}],staticClass:"ui message red"},[e._v(e._s(e.errorMessage))]),e._v(" "),s("div",{staticClass:"ui segment"},[s("div",{staticClass:"field"},[s("div",{staticClass:"ui right icon input large",class:{loading:e.spinner}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],ref:"autocomplete",attrs:{type:"text",placeholder:"Enter address here"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),e._v(" "),s("i",{staticClass:"dot circle link icon",attrs:{id:"dot-icon"},on:{click:function(t){return t.preventDefault(),e.findCurrentLocation.apply(null,arguments)}}})]),e._v(" "),s("button",{staticClass:"tiny ui button",attrs:{id:"add-origin"},on:{click:function(t){return t.preventDefault(),e.addOrigin.apply(null,arguments)}}},[e._v("add origin")]),e._v(" "),s("button",{staticClass:"tiny ui button",attrs:{id:"add-destination"},on:{click:function(t){return t.preventDefault(),e.addDestination.apply(null,arguments)}}},[e._v("add destination")]),e._v(" "),s("button",{staticClass:"tiny ui button",attrs:{id:"add-stop"},on:{click:function(t){return t.preventDefault(),e.addNewStops(!1,!1)}}},[e._v("add stops")])])]),e._v(" "),e._l(e.stopsArray,function(t,i){return s("h3",{directives:[{name:"show",rawName:"v-show",value:e.stopsArrayDetail[i].isOrigin,expression:"stopsArrayDetail[index].isOrigin"}]},[e._v("Origin:")])}),e._v(" "),s("div",{staticClass:"ui list"},e._l(e.stopsArray,function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.stopsArrayDetail[i].isOrigin,expression:"stopsArrayDetail[index].isOrigin"}],staticClass:"item"},[s("i",{staticClass:"map marker icon"}),e._v(" "),s("div",{staticClass:"content"},[s("h4",{staticClass:"header"},[e._v(e._s(t)+" "),s("span",[s("i",{staticClass:"window close outline icon",on:{click:function(t){return e.removeThisLocation(i)}}})])])])])}),0),e._v(" "),e._l(e.stopsArray,function(t,i){return s("h3",{directives:[{name:"show",rawName:"v-show",value:e.stopsArrayDetail[i].isDestination,expression:"stopsArrayDetail[index].isDestination"}]},[e._v("Destination:")])}),e._v(" "),s("div",{staticClass:"ui list"},e._l(e.stopsArray,function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.stopsArrayDetail[i].isDestination,expression:"stopsArrayDetail[index].isDestination"}],staticClass:"item"},[s("i",{staticClass:"map marker icon"}),e._v(" "),s("div",{staticClass:"content"},[s("h4",{staticClass:"header"},[e._v(e._s(t)+" "),s("span",[s("i",{staticClass:"window close outline icon",on:{click:function(t){return e.removeThisLocation(i)}}})])])])])}),0),e._v(" "),s("h3",{directives:[{name:"show",rawName:"v-show",value:e.stopsArray.length-e.origin.length-e.destination.length>0,expression:"stopsArray.length - origin.length - destination.length>0"}]},[e._v("Lists of stops:")]),e._v(" "),s("div",{staticClass:"ui list"},[e._l(e.stopsArray,function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.stopsArrayDetail[i].isOrigin&&!e.stopsArrayDetail[i].isDestination,expression:"!stopsArrayDetail[index].isOrigin && !stopsArrayDetail[index].isDestination"}],staticClass:"item"},[s("i",{staticClass:"map marker icon"}),e._v(" "),s("div",{staticClass:"content"},[s("h4",{staticClass:"header"},[e._v(e._s(t)+" "),s("span",[s("i",{staticClass:"window close outline icon",on:{click:function(t){return e.removeThisLocation(i)}}})])])])])}),e._v(" "),s("form",{directives:[{name:"show",rawName:"v-show",value:e.stopsArray.length>0,expression:"stopsArray.length>0"}],staticClass:"ui segment",attrs:{id:"tranportation"}},[s("div",{attrs:{id:"trasnInside"}},[s("button",{class:e.driving?"green":"white",attrs:{id:"car-button"}}),e._v(" "),s("i",{staticClass:"car icon",on:{click:function(t){return t.preventDefault(),e.carIconClicked.apply(null,arguments)}}}),e._v(" "),s("button",{class:e.bicycling?"green":"white",attrs:{id:"bicycle-button"}}),e._v(" "),s("i",{staticClass:"bicycle icon",on:{click:function(t){return t.preventDefault(),e.bicycleIconClicked.apply(null,arguments)}}}),e._v(" "),s("button",{class:e.transit?"green":"white",attrs:{id:"subway-button"}}),e._v(" "),s("i",{staticClass:"subway icon",on:{click:function(t){return t.preventDefault(),e.subwayIconClicked.apply(null,arguments)}}}),e._v(" "),s("button",{class:e.walking?"green":"white",attrs:{id:"male-button"}}),e._v(" "),s("i",{staticClass:"male icon",on:{click:function(t){return t.preventDefault(),e.walkingIconClicked.apply(null,arguments)}}}),e._v(" "),s("button",{staticClass:"small ui button",attrs:{id:"calculate"},on:{click:e.calculateOptimalItinerary}},[s("router-link",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{to:{name:"ResultMapview"}}},[e._v("calculate")])],1)])])],2)],2)])])},staticRenderFns:[]};var C={name:"Main",components:{NaviBar:r,PlacesInputPanel:s("VU/8")(y,M,!1,function(e){s("3oUP")},"data-v-94ecae1e",null).exports,Mapview:m}},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("NaviBar"),this._v(" "),t("Mapview"),this._v(" "),t("PlacesInputPanel")],1)},staticRenderFns:[]};var A=s("VU/8")(C,D,!1,function(e){s("IWa+")},"data-v-73d9f5c4",null).exports,L={name:"Login",data:function(){return{email:"",password:"",message:""}},methods:{loginAccount:function(){var e=this;this.email&&this.password?(this.message=null,a.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(t){e.$router.push({name:"Main"})}).catch(function(t){e.message=t.message}),this.message=""):this.message="please fill in all fields"}}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("div",[s("h1",{attrs:{id:"login-header"}},[e._v("Login")]),e._v(" "),s("form",{staticClass:"ui segment large form",attrs:{id:"login-form"},on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"field"},[s("label",[e._v("Email")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"julie@gmail.com"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"field"},[s("label",[e._v("Password")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),e._m(0),e._v(" "),s("button",{staticClass:"ui button",attrs:{type:"submit"},on:{click:e.loginAccount}},[e._v("Login")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"ui message red"},[e._v(e._s(e.message))])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"field"},[t("div",{staticClass:"ui checkbox"},[t("input",{staticClass:"hidden",attrs:{type:"checkbox",tabindex:"0"}})])])}]};var b={name:"LoginPage",components:{NaviBar:r,Login:s("VU/8")(L,x,!1,function(e){s("q9gO")},"data-v-2236b9ce",null).exports}},k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("NaviBar"),this._v(" "),t("Login")],1)},staticRenderFns:[]},R=s("VU/8")(b,k,!1,null,null,null).exports,I=s("wffv"),N=s.n(I),S=(s("881v"),a.a.initializeApp({apiKey:"AIzaSyCoepB_sM1CUXWoc2drJ6kxmg6Bu4Y-iF4",authDomain:"optimal-itinerary-planner-2.firebaseapp.com",projectId:"optimal-itinerary-planner-2",storageBucket:"optimal-itinerary-planner-2.appspot.com",messagingSenderId:"383452786146",appId:"1:383452786146:web:e9d2fb44a651827b999dbb",measurementId:"G-HSSKG1B7KT"}));a.a.analytics();var O=S.firestore(),P={name:"Singup",data:function(){return{username:"",email:"",password:"",message:"",slug:null,islogin:!1}},methods:{signup:function(){var e=this;if(this.username&&this.email&&this.password){this.slug=N()(this.username,{replacement:"-",remove:/[!@#$%^&*:]/g,lower:!0});var t=O.collection("users").doc(this.slug);t.get().then(function(s){s.exists?e.message="username already exists":(a.a.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(s){console.log(s.user),t.set({username:e.username,calculatedItinerary:[],calculatedItineraryHistory:[],UID:s.user.uid})}).then(function(){e.$router.push({name:"Main"})}).catch(function(t){e.message=t.message,console.log(e.message)}),e.message="success")})}else this.message="please fill out all fields"}}},$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",{attrs:{id:"signup-header"}},[e._v("Signup")]),e._v(" "),s("form",{staticClass:"ui segment large form",attrs:{id:"signup-form"},on:{submit:function(t){return t.preventDefault(),e.signup.apply(null,arguments)}}},[s("div",{staticClass:"field"},[s("label",[e._v("Username")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",placeholder:"Julie_Z"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"field"},[s("label",[e._v("Email")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"julie@gmail.com"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"field"},[s("label",[e._v("Passsword")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("button",{staticClass:"ui button",attrs:{type:"submit"}},[e._v("Signup")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"ui message red"},[e._v(e._s(e.message))])])])},staticRenderFns:[]};var E={name:"SignupPage",components:{NaviBar:r,Signup:s("VU/8")(P,$,!1,function(e){s("oKJn")},"data-v-59fda435",null).exports}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("NaviBar"),this._v(" "),t("Signup")],1)},staticRenderFns:[]},H=s("VU/8")(E,U,!1,null,null,null).exports,T={name:"RouteList",components:{},data:function(){return{test:null,user:null,calculatedRouteLists:[],curRoutesSaved:!1,travelMode:null}},methods:{showThisRouteOnMap:function(e){var t={travelMode:this.travelMode,routes:[e]};g.$emit("route-data-from-routeList",t)},showAllRoutesOnMap:function(){var e={travelMode:this.travelMode,routes:this.calculatedRouteLists};g.$emit("route-data-from-routeList",e)},saveCurrentRoutes:function(){var e=this;this.curRoutesSaved=!0,O.collection("users").where("UID","==",this.user.uid).get().then(function(t){console.log("snap shot"),console.log(t),t.forEach(function(t){console.log("doc="),console.log(t.data()),console.log(t.data().calculatedItineraryHistory);var s=null;s=t.data().calculatedItineraryHistory;var i={routes:e.calculatedRouteLists,travelMode:e.travelMode};console.log("new route="),console.log(i),s.push(i),console.log("new routes history===="),console.log(s),O.collection("users").doc(t.id).update({calculatedItineraryHistory:s})})})}},created:function(){var e=this;this.user=a.a.auth().currentUser,g.$on("route-data",function(t){e.calculatedRouteLists=[],t&&(e.travelMode=t[0],e.calculatedRouteLists=t[1],e.allCalculatedRouteLists=t[1])}),g.$on("route-data-to-routelist",function(t){console.log("route list received data"),e.calculatedRouteLists=[],t&&(e.travelMode=t.travelMode,console.log("route list received data="),console.log(t),e.calculatedRouteLists=t.routes,e.allCalculatedRouteLists=t.routes)})},mounted:function(){}},B={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Optimal Routes List:")]),e._v(" "),s("section",{staticClass:"ui three column grid",attrs:{id:"input-panel"}},[s("form",{staticClass:"ui segment large form"},[s("h2",[e._v("Results("+e._s(this.travelMode)+"):")]),e._v(" "),s("button",{on:{click:function(t){return t.preventDefault(),e.showAllRoutesOnMap.apply(null,arguments)}}},[e._v("show all routes")]),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:!e.curRoutesSaved&&e.user,expression:"!curRoutesSaved && user"}],staticClass:"save outline icon",on:{click:e.saveCurrentRoutes}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.curRoutesSaved,expression:"curRoutesSaved"}],staticClass:"save icon"}),e._v(" "),e._l(e.calculatedRouteLists,function(t){return s("div",{staticClass:"item",on:{click:function(s){return e.showThisRouteOnMap(t)}}},[s("div",[s("i",{staticClass:"marker alternate icon"}),e._v("\n          "+e._s(t.origin.address)+"\n        ")]),e._v(" "),s("div",[s("i",{staticClass:"flag checkered icon"}),e._v("\n          "+e._s(t.destination.address)+"\n        ")]),e._v(" "),s("div",{staticClass:"ui label small"},[e._v(e._s(t.distance.text))]),e._v(" "),s("div",{staticClass:"ui label small"},[e._v(e._s(t.duration.text))])])})],2)])])},staticRenderFns:[]};var F={name:"ResultMapview",components:{NaviBar:r,RouteList:s("VU/8")(T,B,!1,function(e){s("Uf84")},"data-v-f42441e2",null).exports,Mapview:m},data:function(){return{}},methods:{}},K={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("NaviBar"),this._v(" "),t("Mapview"),this._v(" "),t("RouteList")],1)},staticRenderFns:[]};var V=s("VU/8")(F,K,!1,function(e){s("DKt7")},"data-v-d6a13b90",null).exports,W={name:"History",data:function(){return{routesHistory:null,user:null}},created:function(){var e=this;this.user=a.a.auth().currentUser,O.collection("users").where("UID","==",this.user.uid).get().then(function(t){console.log("snap shot"),console.log(t),t.forEach(function(t){console.log("doc="),console.log(t.data().calculatedItineraryHistory),e.routesHistory=t.data().calculatedItineraryHistory})})},methods:{renderThisItinerary:function(e){console.log(e.routes),g.$emit("route-data-to-routelist",e),g.$emit("route-data-to-mapview",e)}}},G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Saved Itinerary")]),e._v(" "),s("form",{staticClass:"ui segment large form"},e._l(e.routesHistory,function(t,i){return s("div",{staticClass:"item",attrs:{id:"saved-routes"},on:{click:function(s){return e.renderThisItinerary(t)}}},[s("div",[s("h3",[e._v("No. "+e._s(i+1)+"\n                    "),s("button",{attrs:{id:"detail"}},[s("router-link",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{to:{name:"ResultMapview"}}},[e._v("view detail")])],1)]),e._v(" "),s("i",{staticClass:"marker alternate icon"}),e._v("\n                    Origin: "+e._s(t.routes[0].origin.address)+"\n                ")]),e._v(" "),s("div",[s("i",{staticClass:"flag checkered icon"}),e._v("\n                    Destination: "+e._s(t.routes[1].origin.address)+"\n                ")]),e._v(" "),s("div",[s("i",{staticClass:"smile outline icon"}),e._v("\n                    TravelMode: "+e._s(t.travelMode)+"\n                ")])])}),0)])},staticRenderFns:[]};var j={name:"HistoryPage",components:{NaviBar:r,History:s("VU/8")(W,G,!1,function(e){s("VIhV")},"data-v-53a45a72",null).exports}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("NaviBar"),this._v(" "),t("History")],1)},staticRenderFns:[]},z=s("VU/8")(j,q,!1,null,null,null).exports;i.a.use(d.a);var J=new d.a({routes:[{path:"/",name:"Main",component:A},{path:"/mapview",name:"Mapview",component:m},{path:"/loginPage",name:"LoginPage",component:R},{path:"/signuppage",name:"SignupPage",component:H},{path:"/resultmapview",name:"ResultMapview",component:V},{path:"/historypage",name:"HistoryPage",component:z}]});i.a.config.productionTip=!1;a.a.auth().onAuthStateChanged(function(){new i.a({el:"#app",router:J,components:{App:u},template:"<App/>"})})},Uf84:function(e,t){},VIhV:function(e,t){},oKJn:function(e,t){},q9gO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7e3c698fc26a6b395af4.js.map